define("eagle/smiley/2.0.0/smiley",["$"],function(e,t){var i=e("$"),n={textCont:"",smilies:"",emotionBox:"",emotionSrc:"",smiliesBox:{Width:"",Height:"",Border_color:""},smiliesBox_left:"",smiliesBox_top:"",smiliesBox_close:!0,callbacks:{intervene:function(){},insertfinish:function(){},ajaxError:function(){},ajaxSucceed:function(){}}},o=function(e){function t(){var e=i('<div class="emotion-box"><span class="arrow-up relative"><i class="arrow-up-innr"></i></span></div>');e.css({width:m,height:u,border:"1px solid "+x,left:d,top:f}),c.append(e),r=c.find(".emotion-box")}function o(){i.ajax({url:e.emotionSrc,type:"GET",dataType:"json",timeout:1e3,cache:!1,error:function(){g(this,s)},success:function(e){var t=[];i.each(e,function(e,i){var n=i.title,o=i.link,l=['<img data-text="['+n+']" alt="['+n+']" title="'+n+'" src="'+o+'" />'].join("\n");t.push(l)}),c.find(".emotion-login").hide(),r.append(t.join("\n")),p.call(this,s)}})}function l(e,t){var n=e;_$elemText=t,_elemText=_$elemText[0];var o=i.trim(n.attr("data-text")),l="";if(document.selection)_$elemText.focus(),l=document.selection.createRange(),l.text=o,_$elemText.focus();else if(_elemText.selectionStart||"0"==_elemText.selectionStart){var s=_elemText.selectionStart,a=_elemText.selectionEnd,c=a;_elemText.value=_elemText.value.substring(0,s)+o+_elemText.value.substring(a,_elemText.value.length),c+=o.length,_elemText.focus(),_elemText.selectionStart=c,_elemText.selectionEnd=c}else _elemText.value+=o,_$elemText.focus()}var e=i.extend(!0,{},n,e||{}),s=i(e.textCont).eq(0),a=i(e.smilies).eq(0),c=i(e.emotionBox).eq(0),r="",m=e.smiliesBox.Width,u=e.smiliesBox.Height,x=e.smiliesBox.Border_color,d=e.smiliesBox_left,f=e.smiliesBox_top,h=e.callbacks.intervene,_=e.callbacks.insertfinish,g=e.callbacks.ajaxError,p=e.callbacks.ajaxSucceed,v=!0,T=!0;if(!s.length||!a.length||s.length!=a.length)return null;var B=s.data("data-smiley");if("object"==typeof B)return B;var b={options:e,hand_close:function(){r.hide()},hand_open:function(){r.show()}};return a.off(".add").on("click.add",function(e){T?(t(),T=!1):r.show(),e.stopPropagation(),v&&(r.append('<div class="emotion-login"></div>'),o(),v=!1)}),c.off(".addimg").on("click.addimg","img",function(){h.call(this,s),l(i(this),s),_.call(this,s),e.smiliesBox_close&&b.hand_close()}),c.off(".stop").on("click.stop",".emotion-box",function(e){e.stopPropagation()}),e.smiliesBox_close&&i(document).on("click",function(){(null===!r||r.length)&&b.hand_close()}),s.data("data-smiley",b),b},l=function(e){var t=i(e.textCont),n=i(e.smilies),l=i(e.emotionBox);return t.length&&n.length&&t.length==n.length?i(e.textCont).map(function(t){var s={textCont:i(this),smilies:n.eq(t),emotionBox:l.eq(t)},a=i.extend({},e,s);return o(a)}).get():[]};i.fn.extend({getsmiley:function(){return i(this).data("data-smiley")||null}}),t.render=o,t.initMulti=l});